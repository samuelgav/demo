<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui" xmlns:b="http://bootsfaces.net/ui">

<h:head>
	<meta content='text/html; charset=UTF-8' http-equiv="Content-Type" />
	<title>#{sys['nombre']}</title>

	<link rel="stylesheet"
		href="#{request.contextPath}/resources/css/login.css" />
	<link rel="shortcut icon"
		href="#{request.contextPath}/resources/images/principal/favicon.png"
		type="image/x-icon" />
</h:head>

<h:body>

	<script>
		$.blockUI.defaults.message = '<h3>Espere por favor...</h3><br /><img src="resources/images/Ajaxloading.gif" />';
	</script>

	<div style="display: none;">#{loginBean.limpiarDatos()}</div>

	<h:form id="formLogin">

		<p:focus for="idPassword" />

		<b:container styleClass="contenedorLogin">

			<b:panelGrid colSpans="12" small-screen="8" tiny-screen="12"
				large-screen="8" offset-sm="2" offset-lg="2">
				<b:image name="images/principal/logincabecera.png" small-screen="12"
					tiny-screen="12" large-screen="12" style="padding: 0;margin: 0;" />
			</b:panelGrid>

			<b:panelGrid colSpans="12" tiny-screen="12" large-screen="8"
				small-screen="8" offset-sm="2" offset-lg="2">
				<b:panel title="#{sys['nombre']}" collapsible="false" look="primary"
					styleClass="panelmedio">

					<b:row>
						<b:column small-screen="2" large-screen="2" offset-sm="2"
							offset-lg="2">
							<h:outputText value="Usuario" />
						</b:column>
						<b:column small-screen="6" large-screen="6">
							<b:inputText id="idUsuario" placeholder="Usuario"
								value="#{loginBean.usuario.v_usuario}" autocomplete="false"
								required="true" requiredMessage="Ingrese usuario"
								disabled="true">
								<f:facet name="prepend">
									<b:icon name="user" />
								</f:facet>
							</b:inputText>
						</b:column>
					</b:row>

					<b:row>
						<b:column small-screen="2" large-screen="2" offset-sm="2"
							offset-lg="2">
							<h:outputText value="Contraseña Actual" />
						</b:column>
						<b:column small-screen="6" large-screen="6">
							<b:inputSecret id="idPassword" placeholder="Contraseña Actual"
								value="#{loginBean.claveActual}" autocomplete="false"
								required="true" process="@this"
								requiredMessage="Ingrese contraseña actual">
								<f:facet name="prepend">
									<b:iconAwesome name="key" />
								</f:facet>
							</b:inputSecret>
						</b:column>
					</b:row>

					<b:row>
						<b:column small-screen="2" large-screen="2" offset-sm="2"
							offset-lg="2">
							<h:outputText value="Nueva Contraseña" />
						</b:column>
						<b:column small-screen="6" large-screen="6">
							<b:inputSecret id="idNewPass" placeholder="Nueva Contraseña"
								value="#{loginBean.claveNueva}" autocomplete="false"
								required="true" process="@this"
								requiredMessage="Ingrese nueva contraseña">
								<f:facet name="prepend">
									<b:iconAwesome name="key" />
								</f:facet>
							</b:inputSecret>
						</b:column>
					</b:row>

					<b:row>
						<b:column small-screen="2" large-screen="2" offset-sm="2"
							offset-lg="2">
							<h:outputText value="Repita Contraseña" />
						</b:column>
						<b:column small-screen="6" large-screen="6">
							<b:inputSecret id="idNewPassRep" placeholder="Nueva Contraseña"
								value="#{loginBean.claveNuevaRe}" autocomplete="false"
								required="true" process="@this"
								requiredMessage="Ingrese repita contraseña">
								<f:facet name="prepend">
									<b:iconAwesome name="key" />
								</f:facet>
							</b:inputSecret>
						</b:column>
					</b:row>

					<b:row>
						<b:column>
							<b:messages id="msgLogin" colXs="12" colMd="8" offset="2" />
						</b:column>
					</b:row>

					<b:row>
						<b:column small-screen="8" large-screen="8" offset="4">
							<b:commandButton id="btnIngresar" value="Ingresar"
								process=":formLogin" action="#{loginBean.cambiarContrasena}"
								update=":formLogin:idUsuario, :formLogin:idPassword, :formLogin:msgLogin, :formLogin:idNewPass, :formLogin:idNewPassRep"
								ajax="true" look="danger" small-screen="4" tiny-screen="12"
								large-screen="4" />
							<b:commandButton value="Volver"
								onclick="history.go(-1);return false;" look="danger"
								small-screen="4" tiny-screen="12" large-screen="4" />
						</b:column>
					</b:row>

				</b:panel>
			</b:panelGrid>

		</b:container>

	</h:form>

</h:body>
</html>